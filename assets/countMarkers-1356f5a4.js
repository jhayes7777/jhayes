import{d as n,o as t,L as o,a as e,c as a,e as r}from"./index-9d6f8825.js";const i=[r("div",{id:"map"},null,-1)],s=n({__name:"countMarkers",setup(n){let r={minZoom:5,maxZoom:18};return t((()=>{const n=o.map("map",r).setView([30.55227,117.07424],13);o.tileLayer("http://t0.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=8c2992a8d82ecb284c857aa88102a057",{attribution:"stamen"}).addTo(n);const t=o.control({position:"bottomleft"});t.onAdd=function(){const n=o.DomUtil.create("div","description");o.DomEvent.disableClickPropagation(n);const t=o.DomUtil.create("div","markers-in-view");t.insertAdjacentHTML("beforeend","Markers in view: <strong>0</strong>");const e=o.DomUtil.create("div","all-markers");return e.insertAdjacentHTML("beforeend","All markers on map: <strong>0</strong>"),n.appendChild(t),n.appendChild(e),n},t.addTo(n);const e=new Array(50).fill([]).map(((n,t,o)=>[30.55227+.1*(Math.random()-.5),117.07424+.2*(Math.random()-.5)]));console.log(e);const a=o.featureGroup().addTo(n);function i(){const t=n.getBounds(),e=document.querySelector(".markers-in-view strong");let a=0,r=1;n.eachLayer((n=>{n instanceof o.Marker&&t.contains(n.getLatLng())&&(n.bindPopup(`index: <strong>${r.toString()}</strong>`),n._icon.innerHTML=`<strong>${r}<strong>`,n.on("click",(()=>{n._icon.classList.add("animation")})),n.on("popupclose",(()=>{n._icon.classList.remove("animation")})),a++,r++)})),e.textContent=a}e.forEach((([n,t],e)=>{o.marker([n,t],{icon:o.divIcon({className:"leaflet-marker-icon",html:"<span></span>",popupAnchor:[10,-7]})}).addTo(a)})),a.addTo(n),function(){const t=document.querySelector(".all-markers strong");let e=0;n.eachLayer((n=>{n instanceof o.Marker&&e++})),t.textContent=e}(),i(),n.on("moveend",(function(){i()}))})),(n,t)=>(e(),a("div",null,i))}});export{s as default};
