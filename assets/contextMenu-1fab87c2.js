import{d as e,o as t,L as o,c as n,a}from"./index-85ea934c.js";const c={id:"map"},i=e({__name:"contextMenu",setup(e){const i=40.7412684,l=-74.0284178;let s={minZoom:5,maxZoom:18};const r=30.55227,u=117.07424;return t((()=>{const e=o.map("map",s).setView([r,u],13);o.tileLayer("http://t0.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=8c2992a8d82ecb284c857aa88102a057",{attribution:"stamen"}).addTo(e);const t=o.icon({iconUrl:"http://grzegorztomicki.pl/serwisy/pin.png",iconSize:[50,58],iconAnchor:[20,58],popupAnchor:[0,-60]}),n=o.marker([i,l],{icon:t}).bindPopup('<iframe width="320" height="180" src="https://www.youtube.com/embed/OzG6QVjQBAs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>',{maxWidth:"auto",className:"customPopup"});n.addTo(e);const a=[{text:"🗺 查看坐标",callback:function(e){console.log(c);const t=document.querySelector(".coordinates-label");t.style.display="block",t.innerText=`Lat: ${c.lat} Lng: ${c.lng}`,d()}},{text:"🚀 去特定地点",callback:function(t){e.flyTo([i,l],17,{animate:!0,duration:10}),setTimeout((()=>{n.openPopup(),m.innerHTML="<a href='https://en.wikipedia.org/wiki/Statue_of_Frank_Sinatra' target='_blank'>Open wiki: Statue of Frank Sinatra</a>"}),1e4),d()}},{text:"🏠 返回",callback:function(){e.flyTo([r,u],13),n.closePopup(),p(),d()}},{text:"缩进",callback:function(){e.zoomIn(),d()}},{text:"缩放",callback:function(){e.zoomOut(),d()}}];let c={lat:0,lng:0};function d(){const e=document.querySelector(".context-menu");e.removeAttribute("style"),e.classList.remove("is-open")}document.getElementsByClassName("common-layout")[0].appendChild(function(){const e=document.createElement("ul");return e.id="context-menu",e.classList.add("context-menu"),e.setAttribute("data-contextmenu","0"),a.forEach((t=>{const o=document.createElement("li");o.innerText=t.text,o.addEventListener("click",t.callback),e.appendChild(o)})),e}());const m=document.createElement("p");function p(){m.textContent="在地图上右键"}m.classList.add("coordinates-label"),p(),document.body.appendChild(m);var f=document.querySelector("#map");document.addEventListener("contextmenu",(function(t){console.log(f),t.preventDefault(),function(t){const n=document.getElementById("context-menu");n.style.display="block",n.style.left=`${t.pageX}px`,n.style.top=`${t.pageY}px`,n.classList.add("is-open"),console.log(n.style),n.focus();const a=o.point(t.pageX,t.pageY),i=e.containerPointToLatLng(a);c={...c,...i},t.preventDefault()}(t)})),document.addEventListener("wheel",d),["zoomstart","resize","click","move"].forEach((t=>{e.on(t,d)}))})),(e,t)=>(a(),n("div",c))}});export{i as default};
