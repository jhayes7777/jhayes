import{d as e,o as t,L as n,c as a,e as o,a as r}from"./index-4ea71246.js";const c=[o("div",{id:"map"},null,-1),o("ul",{class:"layers"},null,-1)],s=e({__name:"controlLayersOutsideTheMap",setup(e){let o={minZoom:5,maxZoom:18};return t((()=>{const e=n.map("map",o).setView([52.229837,21.011857],17);function t(t){e.setView(t.target.getLatLng(),17)}n.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/dark_all/{z}/{x}/{y}.png",{attribution:"stamen"}).addTo(e),n.layerGroup().addTo(e);let a={pointToLayer:function(e,a){return n.marker(a,{icon:n.divIcon({className:e.properties.amenity,iconSize:n.point(16,16),html:e.properties.amenity[0].toUpperCase(),popupAnchor:[3,-5]})}).bindPopup(e.properties.amenity+"<br><b>"+e.properties.name+"</b>").on("click",t)}};const r=document.querySelector(".layers"),c="all layers";function s(e){const t=e===c?"all-layers":e,n=`\n    <li class="layer-element">\n      <label for="${t}">\n        <input type="checkbox" id="${t}" name="item" class="item" value="${e}" checked>\n        <span>${e}</span>\n      </label>\n    </li>\n  `;r.insertAdjacentHTML("beforeend",n)}s(c);const l=["bar","pharmacy","restaurant"];function i(t,n){e[n?"addLayer":"removeLayer"](window["layer_"+t]),e.fitBounds(window[["layer_"+t]].getBounds(),{padding:[50,50]}),document.querySelector(`#${t}`).checked=n}l.map((t=>{s(t),async function(e){try{const t=await fetch(e);return await t.json()}catch(t){console.error(t)}}(`/${t}.json`).then((o=>{window["layer_"+t]=n.geoJSON(o,a).addTo(e)}))})),document.addEventListener("click",(e=>{const t=e.target;t.closest(".item")&&function(e){"all-layers"===e.id?l.map((t=>{i(t,e.checked)})):i(e.id,e.checked);const t=document.querySelectorAll("input[name=item]:checked");document.querySelector("#all-layers").checked=!(t.length<=3)}(t)}))})),(e,t)=>(r(),a("div",null,c))}});export{s as default};
